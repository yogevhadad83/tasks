/* Base */
:root {
  color-scheme: light dark;
  /* Size of the 3D dice box and its internal scale */
  --dice-box-size: min(38vmin, 320px);
  --dice-canvas-scale: 1;
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; background: #000; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif; }
canvas { display: block; }
#dice-box {
  position: fixed;
  top: 50%;
  left: 50%;
  width: var(--dice-box-size);
  height: var(--dice-box-size);
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 5;
}
#dice-box canvas {
  width: 100% !important;
  height: 100% !important;
  display: block;
  /* Overall dice scale inside the box */
  transform: scale(var(--dice-canvas-scale));
  transform-origin: center center;
}

/* Control panel */
#control-panel {
  position: fixed;
  top: 12px;
  left: 12px;
  background: rgba(20, 20, 20, 0.75);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  padding: 8px 10px;
  display: flex;
  gap: 10px;
  align-items: center;
  backdrop-filter: blur(4px);
}
#control-panel .row { display: flex; gap: 12px; align-items: center; }
#control-panel .status-row { font-size: 13px; }
#control-panel .status-row #rollLabel { font-weight: 700; opacity: 0.95; }
#control-panel .roll-group { display: flex; flex-direction: column; align-items: center; gap: 4px; }
#control-panel button { padding: 6px 10px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.2); background: #1f6feb; color: white; cursor: pointer; }
#control-panel button[disabled] { opacity: 0.6; cursor: not-allowed; }
#control-panel button:hover { filter: brightness(1.1); }
#control-panel #rollLabel { min-width: 64px; text-align: center; opacity: 0.9; }
#control-panel .now-playing { font-size: 12px; opacity: 0.9; }
#control-panel .dot { width: 14px; height: 14px; border-radius: 50%; display: inline-block; border: 1px solid rgba(255,255,255,0.6); }
#control-panel .sep { width: 1px; height: 18px; background: rgba(255,255,255,0.2); margin: 0 6px; display: inline-block; }

/* Visual separators and dot inside control panel */
#control-panel .sep { width: 1px; height: 18px; background: rgba(255,255,255,0.2); margin: 0 6px; display: inline-block; }
#control-panel #turnDot { width: 12px; height: 12px; border: 1px solid rgba(255,255,255,0.7); border-radius: 50%; }
.status-label { opacity: 0.85; font-weight: 600; }

/* Balances */
#control-panel .balances-row { margin-top: 6px; gap: 8px; flex-wrap: wrap; }
.balance-pill { display: inline-flex; align-items: center; gap: 6px; padding: 2px 8px; border-radius: 999px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); color: #fff; font-size: 12px; }
.balance-pill .dot { width: 10px; height: 10px; border: 1px solid rgba(255,255,255,0.7); }

/* Arrow */
@keyframes nudge {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}
.big-arrow { color: #ffd700; width: 22px; height: 22px; opacity: 0; transition: opacity 0.2s ease; animation: nudge 1.2s ease-in-out infinite; }
.big-arrow svg { width: 100%; height: 100%; display: block; }
.big-arrow.show { opacity: 1; }

/* Inline arrow next to roll button */
.big-arrow.inline { transform: rotate(-90deg); margin-left: 8px; }
.big-arrow.inline.show { opacity: 1; }

/* Modal */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: grid;
  place-items: center;
  z-index: 10;
}
.modal {
  width: min(92vw, 420px);
  background: #111;
  color: #fff;
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
}
.modal h2 { margin: 0 0 12px; font-size: 18px; }
.field { display: grid; gap: 6px; margin: 10px 0; }
.field label { font-size: 13px; opacity: 0.9; }
.field input[type="number"] { width: 100%; padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.06); color: #fff; }
.actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 12px; }
.actions button { padding: 8px 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: #2ea043; color: white; cursor: pointer; }
.actions button:hover { filter: brightness(1.06); }

/* Inline stats row inside modals */
.inline-stats {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

/* Pointer when hovering selectable tile */
.canvas-pointer { cursor: pointer; }

/* Game container */
#game-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  color: #fff;
  text-align: center;
}

/* Roll result (math) shown between dice and the roll button */
/* rollLabel now lives in control-panel status row; shrink for header */
#rollLabel { font-size: 14px; margin: 0; min-width: 0; }

.roll-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px; /* keep a little space above the button */
  position: absolute;
  /* Position this relative to the dice size */
  top: calc(var(--dice-box-size) * 0.82);
  left: 50%;
  transform: translateX(-50%);
}

/* Blue button style */
.roll-group #tossBtn {
  padding: 10px 18px;
  border-radius: 999px;
  background: #1f6feb;
  border: 1px solid rgba(255,255,255,0.2);
  color: #fff;
  font-weight: 700;
  font-size: 16px;
}
.roll-group #tossBtn:hover { filter: brightness(1.1); }
.roll-group #tossBtn[disabled] { opacity: .6; cursor: not-allowed; }

/* Now playing name next to label */
#now-playing-title #nowPlayingName {
  margin-left: 6px;
  font-weight: 700;
}

/* Responsive tweaks */
@media (max-width: 520px) {
  :root {
    --dice-box-size: min(54vmin, 300px);
    --dice-canvas-scale: 1;
  }
  .roll-group { top: calc(var(--dice-box-size) * 0.92); }
}
